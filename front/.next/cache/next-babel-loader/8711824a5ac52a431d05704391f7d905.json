{"ast":null,"code":"import React, { useEffect, useState, useCallback } from 'react';\nimport { useSelector } from 'react-redux';\nimport Head from 'next/head';\nimport axios from 'axios';\nimport Router from 'next/router';\nimport useSWR from 'swr';\nimport AppLayout from '../component/AppLayout';\nimport NickNameEditForm from '../component/NickNameEditForm';\nimport FollowList from '../component/FollowList';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nvar fetcher = function fetcher(url) {\n  return axios.get(url, {\n    withCredentials: true\n  }).then(function (result) {\n    return result.data;\n  });\n};\n\nvar Profile = function Profile() {\n  // const dispatch = useDispatch();\n  var _useSelector = useSelector(function (state) {\n    return state.user;\n  }),\n      user = _useSelector.user;\n\n  var _useState = useState(3),\n      followerLimit = _useState[0],\n      setFollowerLimit = _useState[1];\n\n  var _useState2 = useState(3),\n      followingLimit = _useState2[0],\n      setFollowingLimit = _useState2[1];\n\n  var _useSWR = useSWR(\"http://localhost:3065/user/followers?limit=\".concat(followerLimit), fetcher),\n      _useSWR$data = _useSWR.data,\n      followersData = _useSWR$data === void 0 ? [] : _useSWR$data,\n      followerError = _useSWR.error,\n      mutateFollower = _useSWR.mutate;\n\n  var _useSWR2 = useSWR(\"http://localhost:3065/user/followings?limit=\".concat(followingLimit), fetcher),\n      _useSWR2$data = _useSWR2.data,\n      followingsData = _useSWR2$data === void 0 ? [] : _useSWR2$data,\n      followingError = _useSWR2.error,\n      mutateFollowing = _useSWR2.mutate;\n\n  useEffect(function () {\n    if (!(user && user.id)) {\n      Router.push('/');\n    }\n  }, [user && user.id]);\n  /*  useEffect(() => {\r\n    dispatch({\r\n      type: LOAD_FOLLOWERS_REQUEST,\r\n    });\r\n    dispatch({\r\n      type: LOAD_FOLLOWINGS_REQUEST,\r\n    });\r\n  }, []); */\n\n  var loadMoreFollowing = useCallback(function () {\n    setFollowingLimit(function (prev) {\n      return prev + 3;\n    });\n  }, []);\n  var loadMoreFollower = useCallback(function () {\n    setFollowerLimit(function (prev) {\n      return prev + 3;\n    });\n  }, []);\n\n  if (!user) {\n    return '내 정보 로딩 중...';\n  }\n\n  if (followerError || followingError) {\n    console.error(followerError || followingError);\n    return '팔로윙||팔로워 로딩 중 에러가 발생합니다';\n  }\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(Head, {\n      children: /*#__PURE__*/_jsx(\"title\", {\n        children: \"Profile | NodeBird\"\n      })\n    }), /*#__PURE__*/_jsxs(AppLayout, {\n      children: [/*#__PURE__*/_jsx(NickNameEditForm, {}), /*#__PURE__*/_jsx(FollowList, {\n        header: \"Following\",\n        followData: followingsData,\n        mutate: mutateFollowing,\n        onClickMore: loadMoreFollowing,\n        loading: !followingsData && !followingError\n      }), /*#__PURE__*/_jsx(FollowList, {\n        header: \"Follower\",\n        followData: followersData,\n        mutate: mutateFollower,\n        onClickMore: loadMoreFollower,\n        loading: !followersData && !followerError\n      })]\n    })]\n  });\n};\n\nexport var __N_SSP = true;\nexport default Profile;","map":null,"metadata":{},"sourceType":"module"}